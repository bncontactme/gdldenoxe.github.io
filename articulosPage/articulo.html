<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#008080">
    <title>Artículo - GDLDENOXE</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="article-container" id="article-container">
        <header class="article-header">
            <a href="../index.html" class="back-link" onclick="return goBack()">← Regresar</a>
            <h1 id="art-title">Cargando...</h1>
            <p class="article-meta" id="art-meta"></p>
        </header>
        
        <img id="art-hero" src="" alt="" class="article-hero" style="display:none;">
        
        <article class="article-content" id="art-body"></article>
        
        <footer class="article-footer">
            <a href="../index.html" class="back-link" onclick="return goHome()">← Regresar al inicio</a>
        </footer>
    </div>

    <script>
    const goBack = () => {
        if (window.top !== window.self) {
            window.top.location.href = '../indexPage/frame.html?p=articulos';
            return false;
        }
        return true;
    };
    const goHome = () => {
        if (window.top !== window.self) {
            window.top.location.href = '../index.html';
            return false;
        }
        return true;
    };
    (() => {
        const id = new URLSearchParams(location.search).get('id');
        if (!id) return;

        const title = document.getElementById('art-title');
        const meta = document.getElementById('art-meta');
        const hero = document.getElementById('art-hero');
        const body = document.getElementById('art-body');

        fetch('articulos.json')
            .then(r => r.json())
            .then(articulos => {
                const art = articulos.find(a => String(a.id) === id);
                if (!art) {
                    title.textContent = 'Artículo no encontrado';
                    return;
                }

                document.title = art.titulo + ' - GDLDENOXE';
                title.textContent = art.titulo;
                meta.textContent = art.meta;
                hero.src = '../' + art.imagen;
                hero.alt = art.titulo;
                hero.style.display = '';

                const fragment = document.createDocumentFragment();
                const typeMap = { lead: 'p', h2: 'h2', quote: 'blockquote' };
                
                art.contenido.forEach(block => {
                    const tag = typeMap[block.tipo] || 'p';
                    const el = document.createElement(tag);
                    if (block.tipo === 'lead') el.className = 'lead';
                    el.textContent = block.tipo === 'quote' ? '"' + block.texto + '"' : block.texto;
                    fragment.appendChild(el);
                });
                body.appendChild(fragment);
            })
            .catch(() => title.textContent = 'Error al cargar');
    })();
    </script>
</body>
</html>
